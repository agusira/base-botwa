import fs from"fs";class Database{constructor(){this.file={config:"./database/file/config.json",user:"./database/file/user.json",group:"./database/file/group.json"},this.data={}}initFile(e){try{fs.accessSync(e)}catch(e){e.toString().includes("no such file or directory")?(console.log("Creating new file ",e.path),fs.writeFileSync(e.path,JSON.stringify({},null,2))):console.log(e)}}initDatabase(){Object.values(this.file).forEach(e=>{console.log("Checking file: "+e),this.initFile(e)}),this.data={config:JSON.parse(fs.readFileSync(this.file.config)),group:JSON.parse(fs.readFileSync(this.file.group)),user:JSON.parse(fs.readFileSync(this.file.user)),chatai:{},sort:e=>{e.config=Object.fromEntries(Object.entries(e.config).sort())}},this.initConfig()}initConfig(){var e=this.data.config;"authorName"in e||(e.authorName="Agus Irawan"),"botName"in e||(e.botName="Delta"),"newsletter"in e||(e.newsletter="120363292684340402@newsletter"),"owner"in e||(e.owner=["62895359263399"]),"prems"in e||(e.prems=e.owner),"self"in e||(e.self=!0),"changelog"in e||(e.changelog=[])}save(){fs.writeFileSync(this.file.config,JSON.stringify(this.data.config,null,2)),fs.writeFileSync(this.file.group,JSON.stringify(this.data.group,null,2)),fs.writeFileSync(this.file.user,JSON.stringify(this.data.user,null,2))}}let database=new Database;export{database};
